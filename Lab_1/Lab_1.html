<!DOCTYPE html>
<html lang="pt">
<head>
<title>LAB 1</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
{
  box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

header {
  background-color: #6a8d3c;
  padding: 10px;
  text-align: center;
  font-size: 35px;
  color: white;
}

section {
  display: -webkit-flex;
  display: flex;
}

nav {
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  background: #ccc;
  padding: 20px;
}

nav ul {
  list-style-type: none;
  padding: 0;
}

article {
  -webkit-flex: 3;
  -ms-flex: 3;
  flex: 3;
  background-color: #f1f1f1;
  padding: 12px;
}

footer {
  background-color: #708090;
  padding: 10px;
  text-align: center;
  color: white;
}

.code-box {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            padding: 0;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre;
            width: 800px; 
            margin: 0 auto; 
            overflow-x: auto; 
}

figcaption {
    font-size: 14px;
    color: #555;
    margin-top: 5px;
}


@media (max-width: 600px) {
  section {
    -webkit-flex-direction: column;
    flex-direction: column;
  }
}
</style>
</head>
<body>

<header>
    <h1>ESZA019-17SA - Vis√£o Computacional</h1>
    <h3>Lab 01 - Captura de Imagem e V√≠deo</h3>
    <h5>Integrantes
    <br>Diego Aoyagi de Souza - RA: 11066516
    <br>Gabriel Gomes de Oliveira - RA: 11108214
    <br>Gustavo Cardoso Bezerra- RA: 11201822553</h5>
    <h6>Data do Experimento: 25/06/2024
    <br>Data de publica√ß√£o: 02/07/2024</h6>
</header>

<section>  
  <article> <!-- Texto central que indica a introdu√ß√£o do laborat√≥rio em quest√£o-->
    <h2><center>Introdu√ß√£o</center></h2>
    <p><justify>A captura de imagens e v√≠deos √© uma fun√ß√£o essencial em diversas aplica√ß√µes de processamento de imagens e vis√£o computacional. Ela permite a aquisi√ß√£o de dados visuais em tempo real ou a partir de fontes armazenadas, facilitando an√°lises, manipula√ß√µes e processamentos subsequentes. No contexto do OpenCV, uma biblioteca popular para essas tarefas em Python, a captura √© realizada atrav√©s de interfaces simples e poderosas que permitem desde a obten√ß√£o de frames individuais at√© o processamento cont√≠nuo de fluxos de v√≠deo. Este processo n√£o apenas viabiliza a aplica√ß√£o de algoritmos de an√°lise visual, mas tamb√©m proporciona a base para a cria√ß√£o de sistemas interativos e automatizados que dependem de entrada visual em tempo real. 
      O experimento conduzido no laborat√≥rio visa familiarizar os participantes com os comandos fundamentais do OpenCV para visualiza√ß√£o e grava√ß√£o de imagens e v√≠deos. Para isso, organizamos grupos de tr√™s membros para executar as tarefas detalhadas no relat√≥rio fornecido. Utilizando programas em Python e imagens pr√©-existentes, al√©m de capturas de novas imagens, adaptamos os c√≥digos baseados em algumas refer√™ncias tendo como principal a documenta√ß√£o oficial do OpenCV para resolver uma variedade de atividades propostas, incluindo a modifica√ß√£o de cores das imagens, captura de imagens e v√≠deos, e controle da velocidade de reprodu√ß√£o dos v√≠deos.</justify></p>


    <br>
    <h2><center>Procedimentos experimentais</center></h2>
    <p><justify>Baixar os arquivos de refer√™ncia para serem utilizados em aula, bem como as programa√ß√µes utilizadas e salvar numa pasta individual. Nessa mesma pasta, ativar o ambiente virtual criado anteriormente;

      Executar a primeira programa√ß√£o ‚Äúpython3 L1_1_img.py‚Äù, e atrav√©s da an√°lise do c√≥digo presente no arquivo, estudo de refer√™ncias e seguindo outros exemplos, identificar o motivo da imagem aparecer em escala de cinza;
      
      Executar o arquivo ‚Äúpython3 L1_2_video.py‚Äù e modificar o c√≥digo com intuito de alterar a velocidade de exibi√ß√£o do v√≠deo ‚Äúbig buck bunny‚Äù disponibilizado.
      
      Ligar a Webcam disponibilizada pelo laborat√≥rio no computador e utilizando o algoritmo  ‚ÄúL1_3_webcam.py‚Äù fazer a leitura de uma sequ√™ncia de imagens que ser√£o posteriormente mostradas na tela do computador. Para isso deve-se modificar o c√≥digo base presente com intuito de capturar as imagens ao pressionar a tecla‚Äùx‚Äù no teclado.
      
      Uma vez feita a capta√ß√£o de imagens, √© hora de obter uma grava√ß√£o de v√≠deo atrav√©s da leitura do programa ‚ÄúL1_4_webcap.py‚Äù que ir√° fazer a captura de uma sequ√™ncia de imagens e ao apertar o bot√£o ‚Äúq‚Äù salva essa sequ√™ncia em um arquivo de extens√£o .avi e para que elas sejam exibidas numa velocidade aceit√°vel, deve ser feito uma modifica√ß√£o no c√≥digo base.
      
      Para executar a segunda parte do experimento, vamos utilizar a webcam e os conhecimentos adquiridos na parte 1 deste experimento para desenvolver as atividades.
      
      Na primeira atividade devemos utilizar partes dos c√≥digos existentes para formar um programa que capta uma imagem que contenha os integrantes do grupo;
      
      Na segunda atividade vamos capturar uma sequ√™ncia de quatro v√≠deos, sendo dois deles com pessoas e dois com um objetos. O objetivo √© gravar os v√≠deos como diferentes velocidades de execu√ß√£o de movimentos e com pessoas diferentes
      
      Na terceira atividade, devemos utilizar algum software de edi√ß√£o de imagens para compor uma s√≥ imagem concatenando 3 imagens diferentes contendo o avatar de cada integrante do grupo, na mesma ordem da foto capturada na primeira atividade da parte 2.
      </justify></p>

    <br>
	  <h2><center>Parte 1</center></h2>
	  		<p><center> <b>Pergunta A - Responda:</b> por que a janela aberta n√£o mostra a imagem colorida? 

                    <br><b>Resposta:</b> O c√≥digo abre a imagem em preto e branco porque na linha img = cv.imread('messi5.jpg',0), o par√¢metro 0 indica que a imagem deve ser lida em escala de cinza.
          
                    A fun√ß√£o cv.imread do OpenCV √© utilizada para ler imagens de arquivos. Quando voc√™ passa o segundo argumento como 0 (zero), isso especifica que a imagem deve ser carregada em modo de escala de cinza. Isso significa que a imagem ser√° convertida para uma representa√ß√£o em tons de cinza, onde cada pixel ter√° apenas um valor representando a intensidade luminosa, ao inv√©s de tr√™s valores (para os canais de cor vermelho, verde e azul) como em uma imagem colorida.
        </center	></p>

        <p><center> <b>Pergunta B - Altere:</b> modifique o programa para que as imagens sejam exibidas mais rapidamente e depois para que sejam exibidas mais lentamente. Responda: qual a explica√ß√£o de altera√ß√£o de velocidade de exibi√ß√£o, e apresente suas solu√ß√µe detalhadamente.
                    <br><b>Resposta:</b> O controle da velocidade de exibi√ß√£o √© definida na linha 15 do script, onde est√° definido     ‚Äútime.sleep(1/25.0)‚Äù, desta forma, se queremos aumentar a velocidade, o denominador da fra√ß√£o deve ser maior que 25.0 e caso quisermos diminuir a velocidade, devemos diminuir o denominador para alterar o tempo de espera entre um frame e o outro
            
        </center	></p>

        <p><center> <b>Pergunta C - Altere:</b> modifique o programa para que uma imagem da c√¢mera seja salva num arquivo ‚Äúfoto1.png‚Äù no momento em que for clicada a tecla ‚Äòx‚Äô no teclado. Apresente o resultado e sua solu√ß√£o detalhadamente.
                    <br><b>Resposta:</b> Para salvar a imagem, utilizamos um if que aguarda o pressionamento da tecla x e caso seja pressionada, o frame √© salvo no arquivo foto1.png e o programa √© encerrado.
          
        </center	></p>

      
        <pre class="code-box">
          <code>
              <h3>
                import numpy as np
                import cv2 as cv
                
                
                cap = cv.VideoCapture(0)
                
                
                if not cap.isOpened():
                   print("Cannot open camera")
                   exit()
                  
                while True:
                   # Capture frame-by-frame
                   ret, frame = cap.read()
                   # if frame is read correctly ret is True
                   if not ret:
                       print("Can't receive frame (stream end?). Exiting ...")
                       break
                  
                   # Display the resulting frame
                   cv.imshow('frame', frame)
                  
                   if cv.waitKey(1) == ord('x'):
                       # Salva o frame na foto1.png
                       cv.imwrite('foto1.png',frame)
                       break
                      
                   if cv.waitKey(1) == ord('q'):
                       break
                
                
                # When everything done, release the capture
                cap.release()
                cv.destroyAllWindows()
                </h3>  
          </code>
        </pre>
      <center><figcaption>C√≥digo python utilizado na resolu√ß√£o da quest√£o C</figcaption><p></center>
        
      

        <p><center> <b>Pergunta D - Altere:</b> modifique o programa para que as imagens gravadas estejam ‚Äúnormais‚Äù no arquivo de video salvo, e apresentem uma velocidade de exibi√ß√£o adequada. Apresente o resultado e sua solu√ß√£o detalhadamente.
                    <br><b>Resposta:</b> Para exibir a imagem normal, retiramos a linha que realizava o flip da imagem, dessa forma a imagem √© exibida na forma original e al√©m disso realizamos a altera√ß√£o da vari√°vel ‚Äúfps‚Äù para 30.0, dessa forma o v√≠deo i≈ïa exibir 30 frames por segundo.
          
        </center	></p>

        <pre class="code-box">
          <code>
              <h3>
                import numpy as np
                import cv2 as cv
                cap = cv.VideoCapture(0)


                # Get current width of frame
                width = cap.get(cv.CAP_PROP_FRAME_WIDTH)   # float
                # Get current height of frame
                height = cap.get(cv.CAP_PROP_FRAME_HEIGHT) # float
                # Define Video Frame Rate in fps
                fps = 30.0


                # Define the codec and create VideoWriter object
                fourcc = cv.VideoWriter_fourcc(*'XVID')
                out = cv.VideoWriter('saida.avi', fourcc, fps, (int(width),int(height)) )


                while cap.isOpened():
                   ret, frame = cap.read()
                   if not ret:
                       print("Can't receive frame (stream end?). Exiting ...")
                       break
                   #frame = cv.flip(frame, 0)
                   # write the flipped frame
                   out.write(frame)
                   cv.imshow('frame', frame)
                   if cv.waitKey(1) == ord('q'):
                       break


                # Release everything if job is finished
                cap.release()
                out.release()
                cv.destroyAllWindows()

                </h3>  
          </code>
        </pre>
        <center><figcaption>C√≥digo python utilizado na resolu√ß√£o da quest√£o D</figcaption><p></center>

        <br>
        <h2><center>An√°lise e discuss√£o dos estudos realizados</center></h2>
        <p><justify>Os estudos realizados no laborat√≥rio demonstraram a versatilidade e a robustez do OpenCV como uma ferramenta para captura e processamento de imagens e v√≠deos. Os exerc√≠cios pr√°ticos permitiram explorar diferentes aspectos da biblioteca, desde a simples leitura e exibi√ß√£o de imagens at√© a captura de v√≠deo em tempo real. A compreens√£o dos conceitos b√°sicos e a habilidade de modificar par√¢metros para ajustar resultados foram algumas das compet√™ncias desenvolvidas nesse laborat√≥rio.</justify></p>

        <br>
        <h2><center>Conclus√£o</center></h2>
        <p><justify>Concluindo, o laborat√≥rio de captura de imagem e v√≠deo proporcionou uma experi√™ncia valiosa no uso do OpenCV. Os participantes aprenderam a import√¢ncia de configurar corretamente par√¢metros e a utilizar comandos b√°sicos para manipula√ß√£o de imagens e v√≠deos. As habilidades adquiridas durante este experimento formam a base para desenvolvimentos mais avan√ßados em vis√£o computacional, capacitando a equipe a criar sistemas interativos e automatizados que dependem de entrada visual em tempo real.
        </justify></p>

				<br>
	      <h2><center>Parte 2</center></h2>
	  		<p><center> Foto de todos os integrantes.</center	></p>
				<p><center><img src="todos.png" alt="Foto de todos os integrantes"></center></p>
				
        <p><center> Foto de todos os avatares.</center	></p>
        <p><center><img src="avatar.png" alt="Foto de todos os avatares"></center></p>
	  
	  	  <p><center>V√≠deos Rapidos</center></p>
        <p><center><video src="saida_1.mp4" width="600" controls autoplay loop></video>
	        <video src="saida_2.mp4" width="600" controls autoplay loop></video></center></p>
        <p><center>V√≠deos Lentos</center></p>

        <p><center><video src="saida_3.mp4" width="600" controls autoplay loop></video>
        <video src="saida_4.mp4" width="600" controls autoplay loop></video></center></p>
        
        <br>
        <h2><center>Refer√™ncias</center></h2>
        <p><justify><center>
          Analytical, C. N. S. [@cnsanalytical6835]. ([s.d.]). üöÄ curso OpenCV Python - portugu√™s. Youtube. Recuperado 25 de junho de 2024, de http://www.youtube.com/playlist  list=PLsyobOqUhkthjvmA_s7tTjb7V2EiwYYGC
          <br>OpenCV: Getting started with images. ([s.d.]). Opencv.org. Recuperado 25 de junho de 2024, de https://docs.opencv.org/4.x/db/deb/tutorial_display_image.html
          <br>OpenCV: Getting started with videos. ([s.d.]). Opencv.org. Recuperado 25 de junho de 2024, de https://docs.opencv.org/4.x/dd/d43/tutorial_py_video_display.html
          <br>OpenCV: OpenCV-Python Tutorials. ([s.d.]). Opencv.org. Recuperado 25 de junho de 2024, de https://docs.opencv.org/master/d6/d00/tutorial_py_root.html
        </center></justify></p>

  </article>
</section>

<footer>
  <p>2¬∫ Quadrimestre 2024</p>
</footer>

</body>
</html>